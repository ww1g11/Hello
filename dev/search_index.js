var documenterSearchIndex = {"docs":
[{"location":"notes/#Reducing-the-startup-time-1","page":"Reducing the startup time","title":"Reducing the startup time","text":"","category":"section"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"Julia is a dynamically-typed langangue, so the input script will be compiled when we start a simulation. However, the typical startup time in our case ranges from 1s to 30s depends on the complexity of the problem. It is painful especially if we run the simulation using GPU. Luckily, we can compile our package using PackageCompiler.jl:","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"using PackageCompiler\ncompile_incremental(:JuMag)","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"After finishing the compilation, a dyn.so file will be generated. If we start julia using julia -J /path/to/dyn.so the stratup time will be ignorable.","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"Note: If you got an error similar to that shown at https://github.com/JuliaLang/PackageCompiler.jl/issues/184, using dev PackageCompiler may solve the issue.","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"If other errors appear, it is better to figure out which package is failed","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"compile_incremental(:FFTW, :CUDAdrv, :CUDAnative, :CuArrays, force=false)","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"and remove that package from deps in Project.toml. For example, if CuArrays fails, comment the line","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"#CuArrays = \"3a865a2d-5b23-5a0f-bc46-62713ec82fae\"","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"may solve the problem.","category":"page"},{"location":"notes/#Tutorial-1","page":"Reducing the startup time","title":"Tutorial","text":"","category":"section"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"To start a micromagnetic simulation, we first create a FDMesh","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"mesh = FDMesh(dx=2e-9, dy=2e-9, dz=2e-9, nx=100, ny=100)","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"After that, we create a simulation","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"sim = Sim(mesh, name=\"vortex\")","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"and set the damping to 0.5 and switch off the precession term in LLG equation:","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"sim.driver.alpha = 0.5\nsim.driver.precession = false","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"The geometry of the system can be defined by","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"set_Ms(sim, circular_Ms)","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"where circular_Ms could be a scalar or a function. The function should take six parameters (i,j,k,dx,dy,dz), for instance","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"function circular_Ms(i,j,k,dx,dy,dz)\n    if (i-50.5)^2 + (j-50.5)^2 <= 50^2\n        return 8.6e5\n    end\n    return 0.0\nend","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"We add the exchange interaction and the demagnetization field to the system.","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"add_exch(sim, 1.3e-11)\nadd_demag(sim)","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"We need to initialise the system which can be done by defining a function","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"function init_fun(i,j,k,dx,dy,dz)\n  x = i-50.5\n  y = j-50.5\n  r = (x^2+y^2)^0.5\n  if r<5\n    return (0,0,1)\n  end\n  return (x/r, -y/r, 0)\nend","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"and using","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"init_m0(sim, init_fun)","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"To trigger the simulation we relax the system","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"relax(sim, maxsteps=1000)","category":"page"},{"location":"notes/#Implemented-equations-1","page":"Reducing the startup time","title":"Implemented equations","text":"","category":"section"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"Exchange energy\nE_mathrmex = int_V A (nabla vecm)^2 mathrmdV\nBulk DMI energy\nE_mathrmdmi = int_V D vecm cdot (nabla times vecm)  mathrmdV\nAnisotropy","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"E_mathrmanis = int_V K_u  1 - (vecm cdot hatu)^2  dV","category":"page"},{"location":"notes/#LLG-equation-1","page":"Reducing the startup time","title":"LLG equation","text":"","category":"section"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"fracpartial vecmpartial t = - gamma vecm times vecH + alpha vecm times  fracpartial vecmpartial t","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"LL form:","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"(1+alpha^2)fracpartial vecmpartial t = - gamma vecm times vecH - alpha gamma vecm times (vecm times vecH)","category":"page"},{"location":"notes/#LLG-equation-with-Zhang-Li-extension-1","page":"Reducing the startup time","title":"LLG equation with Zhang-Li extension","text":"","category":"section"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"fracpartial vecmpartial t = - gamma vecm times vecH + alpha vecm times  fracpartial vecmpartial t   + u_0 (vecj_s cdot nabla) vecm - beta u_0 vecmtimes (vecj_s cdot nabla)vecm","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"where","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"u_0=fracp g mu_B2 e M_s=fracp g mu_B a^32 e mu_s","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"and $\\mu_B=|e|\\hbar/(2m)$ is the Bohr magneton. In LL form","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"(1+alpha^2)fracpartial vecmpartial t = - gamma vecm times vecH - alpha gamma vecm times (vecm times vecH) + (1+alphabeta) u_0 vectau - (beta-alpha) u_0 (vecmtimes vectau)","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"where \\vec{\\tau}=(\\vec{j}_s \\cdot \\nabla)\\vec{m}","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"Note that","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"u_0 (vecj_s cdot nabla) vecm=  - u_0 vecmtimesvecmtimes (vecj_s cdot nabla)vecm","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"so this torque is damping-like torque and the last torque is field-like torque. Therefore, we rewrite the LLG equation in the form","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"fracpartial vecmpartial t =\nF(vecm)\ntimes vecm","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"where","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"F(vecm) = frac1(1+alpha^2)\ngamma vecH + u_0 (beta-alpha)vectau+\nfrac1(1+alpha^2)vecm times alpha gamma\n  vecH + u_0 (1+alphabeta) vectau","category":"page"},{"location":"notes/#Cayley-transformation-1","page":"Reducing the startup time","title":"Cayley transformation","text":"","category":"section"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"The LLG equation can be cast into","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"fracpartial vecmpartial t = hatF(vecm) cdot vecm","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"where the operator \\hat{} is defined as","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"hatx = left( beginmatrix\n  0  -x_3  x_2 \n  x_3  0  -x_1 \n  -x_2  x_1  0\n endmatrix right)","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"Using the Cayley transfromation, the LLG equation can be written as","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"fracpartial Omegapartial t = F - frac12 Omega F\n- frac14 Omega F Omega","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"where","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"Omega = hatomega","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"So one has","category":"page"},{"location":"notes/#","page":"Reducing the startup time","title":"Reducing the startup time","text":"fracpartial vecomegapartial t = vecF - frac12\n(omega times vecF)\n+ frac14 (omega cdot vecF) vecomega","category":"page"}]
}
